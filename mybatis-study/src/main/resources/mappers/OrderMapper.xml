<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yicj.mybatis.mapper.OrderMapper">
	<!-- 使用resultType不能完成自动映射，需要手动完成结果集映射resultMap -->
	<resultMap id ="OrderUserResultMap" type ="Order" autoMapping="true">
		<id column="id" property ="id"></id>
		<!-- association:完成子对象的映射 -->
		<!-- property: 子对象在父对象中的属性名 -->
		<!-- javaType: 子对象的java类型 -->
		<!-- autoMapping:完成子对象的自动映射，若开始驼峰，则按驼峰匹配 -->
		<association property="user" javaType="User" autoMapping="true">
		    <!-- 这个不知道有啥用 -->
			<!-- <id column="user_id" property="id"></id> -->
		</association>
	</resultMap>
	
	<select id ="queryOrderWithUserByOrderNumber" resultMap ="OrderUserResultMap">
		 select * 
		 from tb_order o left join tb_user u on o.user_id=u.id 
		 where o.order_number = #{number}
	</select>
	
</mapper>